"use strict";(()=>{var e={};e.id=497,e.ids=[497],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},75230:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>w,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>g});var s={};r.r(s),r.d(s,{POST:()=>u});var o=r(95419),n=r(69108),a=r(99678),i=r(78070),l=r(70922);async function u(e){try{let{email:t}=await e.json();if(!t)return i.Z.json({error:"Email is required"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return i.Z.json({error:"Invalid email format"},{status:400});console.log("Newsletter signup",{email:t,ts:new Date().toISOString()});try{await l.i6`
        INSERT INTO newsletter_subscribers (email)
        VALUES (${t})
      `,console.log("✅ Newsletter subscriber saved to Neon database")}catch(e){if(e.message&&e.message.includes("duplicate"))return i.Z.json({success:!0,message:"You are already subscribed to our newsletter!"});console.error("❌ Neon database error:",e)}return fetch("http://localhost:3000/api/send-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,source:"newsletter_signup"})}).catch(e=>console.error("Notification error:",e)),i.Z.json({success:!0,message:"Thank you for subscribing to our newsletter!"})}catch(e){return console.error("Internal server error:",e),i.Z.json({error:"Internal server error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/newsletter/route",pathname:"/api/newsletter",filename:"route",bundlePath:"app/api/newsletter/route"},resolvedPagePath:"C:\\Users\\LENOVO\\Desktop\\cursor\\app\\api\\newsletter\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:h,headerHooks:m,staticGenerationBailout:g}=c,w="/api/newsletter/route";function f(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}},70922:(e,t,r)=>{r.d(t,{M7:()=>o,i6:()=>s});let s=(0,r(89539).qn)((()=>{let e=process.env.DATABASE_URL;if(!e)throw Error("DATABASE_URL environment variable is not set");if(!e.startsWith("postgresql://"))throw Error("Invalid DATABASE_URL format. Must start with postgresql://");return(e.includes("sslmode=disable")||e.includes("sslmode=allow"))&&console.warn("⚠️  WARNING: Database connection is not using strict SSL mode. Consider using sslmode=require"),e})());async function o(){try{return await s`SELECT NOW()`,console.log("✅ Neon database connected successfully"),!0}catch(e){return console.error("❌ Neon connection failed: Connection could not be established"),!1}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,539],()=>r(75230));module.exports=s})();